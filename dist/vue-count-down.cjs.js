"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var script={name:"count-down",data:function(){return{endTimestamp:0,timer:null,restCount:0,time:{d:0,h:0,i:0,s:0,rs:0}}},props:{endTime:{type:[Number,Date,String]},count:{type:Number,default:0},step:{type:Number,default:1},model:{type:String,default:"timer"}},beforeDestroy:function(){this.clearTimer()},watch:{endTime:{immediate:!0,handler:function(e){e&&(this.endTimestamp=this.parseDate(this.endTime),this.endTimestamp&&"timer"===this.model?this.triggerTimer():this.clearTimer())}},count:{immediate:!0,handler:function(e){e>0&&(this.endTimestamp=Date.now()+1e3*e,this.restCount=e,this.clearTimer(),this.triggerTimer())}}},computed:{stepTime:function(){return"timer"===this.model?1e3:1e3*Math.max(this.step,1)}},methods:{parseDate:function(e){return"number"==typeof e||"string"==typeof e&&-1===e.indexOf("-")?parseInt(10===e.toString().length?1e3*e:e):"string"==typeof e?new Date(e).getTime():"object"===_typeof(_typeof(e))&&e.getTime()},clearTimer:function(){this.timer&&clearTimeout(this.timer)},triggerTimer:function(){var e=this,t=this;this.render(),this.timer=setTimeout((function(){("timer"===t.model?e.getRestTime():e.restCount-1)<0?t.$emit("ended"):(e.restCount--,t.triggerTimer())}),this.stepTime)},render:function(){var e=this,t={};if("timer"===this.model){var i=this.getRestTime();this.time.d=this.formatNumber(Math.floor(i/86400)),this.time.h=this.formatNumber(Math.floor(i%86400/3600)),this.time.i=this.formatNumber(Math.floor(i%3600/60)),this.time.s=this.formatNumber(Math.floor(i%60)),this.time.rs=i,t={day:this.time.d,hour:this.time.h,minute:this.time.i,second:this.time.s,restSecond:i}}else t={restCount:this.restCount};this.$nextTick((function(){e.$emit("update",t)}))},formatNumber:function(e,t){return e<10?(e=Math.max(e,0),t?"0".concat(e):e.toString()):e.toString()},getRestTime:function(){return Math.round((this.endTimestamp-Date.now())/1e3)}}};function normalizeComponent(e,t,i,n,o,r,s,m,_,u){"boolean"!=typeof s&&(_=m,m=s,s=!1);var a,d="function"==typeof i?i.options:i;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),n&&(d._scopeId=n),r?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,_(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=a):t&&(a=s?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,m(e))}),a)if(d.functional){var c=d.render;d.render=function(e,t){return a.call(t),c(e,t)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,a):[a]}return i}var normalizeComponent_1=normalizeComponent;const __vue_script__=script;var __vue_render__=function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",["timer"===e.model?e._t("default",[e.time.rs>0?[e._v("\n       "+e._s(e.time.d)+"天"+e._s(e.time.h)+"时"+e._s(e.time.i)+"分"+e._s(e.time.s)+"秒\n    ")]:e._e()],{day:e.time.d,hour:e.time.h,minute:e.time.i,second:e.time.s,restSecond:e.time.rs}):e._t("counter",[e.restCount>0?[e._v(e._s(e.restCount))]:void 0],{restCount:e.restCount})],2)},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;const __vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,__vue_component__=normalizeComponent_1({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},void 0,__vue_script__,void 0,!1,void 0,!1,void 0,void 0,void 0);__vue_component__.install=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.component||"count-down",__vue_component__)},module.exports=__vue_component__;
