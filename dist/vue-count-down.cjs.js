"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var script={data:function(){return{endTimestamp:0,timer:null,restCount:0,time:{day:0,hour:0,minute:0,second:0}}},props:{endTime:{type:[Number,Date,String]},count:{type:Number,default:0},step:{type:Number,default:1},model:{type:String,default:"timer"}},beforeDestroy:function(){this.clearTimer()},watch:{endTime:{immediate:!0,handler:function(t){t&&this.restart()}},count:{immediate:!0,handler:function(t){t>0&&this.restart(t)}}},computed:{stepTime:function(){return"timer"===this.model?1e3:1e3*Math.max(this.step,1)}},methods:{parseDate:function(t){return"number"==typeof t||"string"==typeof t&&-1===t.indexOf("-")?parseInt(10===t.toString().length?1e3*t:t):"string"==typeof t?new Date(t).getTime():"object"===_typeof(_typeof(t))&&t.getTime()},clearTimer:function(){this.timer&&clearTimeout(this.timer)},triggerTimer:function(){var t=this,e=this;this.render(),this.timer=setTimeout((function(){("timer"===e.model?t.getRestTime():--t.restCount)<0?(e.$emit("ended"),e.$emit("update:count",0)):e.triggerTimer()}),this.stepTime)},render:function(){var t=this,e={};if("timer"===this.model){var i=this.getRestTime();this.time.day=this.formatNumber(Math.floor(i/86400)),this.time.hour=this.formatNumber(Math.floor(i%86400/3600)),this.time.minute=this.formatNumber(Math.floor(i%3600/60)),this.time.second=this.formatNumber(Math.floor(i%60)),this.restCount=i,e={day:this.time.day,hour:this.time.hour,minute:this.time.minute,second:this.time.second}}else e={restCount:this.restCount};this.$nextTick((function(){t.$emit("update",e)}))},formatNumber:function(t,e){return t<10?(t=Math.max(t,0),e?"0".concat(t):t.toString()):t.toString()},getRestTime:function(){return Math.round((this.endTimestamp-Date.now())/1e3)},restart:function(t){this.clearTimer(),"timer"===this.model?t>0?(this.endTimestamp=Date.now()+1e3*t,this.triggerTimer()):this.count>0?(this.endTimestamp=Date.now()+1e3*this.count,this.triggerTimer()):this.endTime&&(this.endTimestamp=this.parseDate(this.endTime),this.endTimestamp&&this.triggerTimer()):t>0?(this.restCount=t,this.triggerTimer()):this.count>0&&(this.restCount=this.count,this.triggerTimer())}}};function normalizeComponent(t,e,i,n,o,r,s,m,u,_){"boolean"!=typeof s&&(u=m,m=s,s=!1);var a,d="function"==typeof i?i.options:i;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),n&&(d._scopeId=n),r?(a=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,u(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=a):e&&(a=s?function(){e.call(this,_(this.$root.$options.shadowRoot))}:function(t){e.call(this,m(t))}),a)if(d.functional){var c=d.render;d.render=function(t,e){return a.call(e),c(t,e)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,a):[a]}return i}var normalizeComponent_1=normalizeComponent;const __vue_script__=script;var __vue_render__=function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._t("default",[t.restCount>0?["timer"===t.model?[t._v("\n        "+t._s(t.time.day)+"天"+t._s(t.time.hour)+"时"+t._s(t.time.minute)+"分"+t._s(t.time.second)+"秒\n      ")]:[t._v(t._s(t.restCount))]]:void 0],{day:t.time.day,hour:t.time.hour,minute:t.time.minute,second:t.time.second,restCount:t.restCount})],2)},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;const __vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,__vue_component__=normalizeComponent_1({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},void 0,__vue_script__,void 0,!1,void 0,!1,void 0,void 0,void 0);__vue_component__.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.component||"count-down",__vue_component__)},module.exports=__vue_component__;
