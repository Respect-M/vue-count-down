function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e=function(t,e,i,n,r,o,s,m,a,u){"boolean"!=typeof s&&(a=m,m=s,s=!1);var d,h="function"==typeof i?i.options:i;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,r&&(h.functional=!0)),n&&(h._scopeId=n),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,a(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=d):e&&(d=s?function(){e.call(this,u(this.$root.$options.shadowRoot))}:function(t){e.call(this,m(t))}),d)if(h.functional){var c=h.render;h.render=function(t,e){return d.call(e),c(t,e)}}else{var f=h.beforeCreate;h.beforeCreate=f?[].concat(f,d):[d]}return i};const i={name:"count-down",data:function(){return{endTimestamp:0,timer:null,restCount:0,time:{d:0,h:0,i:0,s:0,rs:0}}},props:{endTime:{type:[Number,Date,String]},count:{type:Number,default:0},step:{type:Number,default:1},model:{type:String,default:"timer"}},beforeDestroy:function(){this.clearTimer()},watch:{endTime:{immediate:!0,handler:function(t){t&&(this.endTimestamp=this.parseDate(this.endTime),this.endTimestamp&&"timer"===this.model?this.triggerTimer():this.clearTimer())}},count:{immediate:!0,handler:function(t){t>0&&(this.endTimestamp=Date.now()+1e3*t,this.restCount=t,this.clearTimer(),this.triggerTimer())}}},computed:{stepTime:function(){return"timer"===this.model?1e3:1e3*Math.max(this.step,1)}},methods:{parseDate:function(e){return"number"==typeof e||"string"==typeof e&&-1===e.indexOf("-")?parseInt(10===e.toString().length?1e3*e:e):"string"==typeof e?new Date(e).getTime():"object"===t(t(e))&&e.getTime()},clearTimer:function(){this.timer&&clearTimeout(this.timer)},triggerTimer:function(){var t=this,e=this;this.render(),this.timer=setTimeout((function(){("timer"===e.model?t.getRestTime():t.restCount-1)<0?e.$emit("ended"):(t.restCount--,e.triggerTimer())}),this.stepTime)},render:function(){var t=this,e={};if("timer"===this.model){var i=this.getRestTime();this.time.d=this.formatNumber(Math.floor(i/86400)),this.time.h=this.formatNumber(Math.floor(i%86400/3600)),this.time.i=this.formatNumber(Math.floor(i%3600/60)),this.time.s=this.formatNumber(Math.floor(i%60)),this.time.rs=i,e={day:this.time.d,hour:this.time.h,minute:this.time.i,second:this.time.s,restSecond:i}}else e={restCount:this.restCount};this.$nextTick((function(){t.$emit("update",e)}))},formatNumber:function(t,e){return t<10?(t=Math.max(t,0),e?"0".concat(t):t.toString()):t.toString()},getRestTime:function(){return Math.round((this.endTimestamp-Date.now())/1e3)}}};var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",["timer"===t.model?t._t("default",[t.time.rs>0?[t._v("\n       "+t._s(t.time.d)+"天"+t._s(t.time.h)+"时"+t._s(t.time.i)+"分"+t._s(t.time.s)+"秒\n    ")]:t._e()],{day:t.time.d,hour:t.time.h,minute:t.time.i,second:t.time.s,restSecond:t.time.rs}):t._t("counter",[t.restCount>0?[t._v(t._s(t.restCount))]:void 0],{restCount:t.restCount})],2)};n._withStripped=!0;const r=e({render:n,staticRenderFns:[]},void 0,i,void 0,!1,void 0,!1,void 0,void 0,void 0);r.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.component||"count-down",r)};export default r;
